---
title: 那无力感
layout: post
tags:
    - 随笔
---
  这次的问题牵扯到两个挂在i2c总线上的ic，经过反复测试，发现单独挂一个ic没问题，当两个ic都挂在上面的时候，就非常容易出问题。几位老大问我对这问题有什么想法，我顿了一下，竟呀口无言，我完全不知道该怎么解决这个问题，甚至连追查问题的思路都没有。如今想想，归根结底，是因为我不了解i2c协议，对硬件也是一窍不通，一碰上和硬件相关的问题便束手无策。后来没办法，老大亲自出马，用示波器看波形，并告诉我应该量哪个脚，什么波形是不正常的，然后我去测试。我也只能按照老大的说法，不停地重复测试每一块板子，看到波形有点异样就去告诉老大。这种测试我整整干了两天，那两天，我感到了深深的无力。
  第三天到公司，我觉得再这么瞎测下去不是办法，测试了两天，感觉问题毫无规律，于是我决定抽点时间去了解一下i2c协议。一天下来，我知道了什么是i2c地址，知道了SCL和DATA，知道了主设备和从设备的概念，了解了它们传输数据时的时序。这时我再看示波器上那一上一下的东西，似乎没那么悬乎了。
  但是看懂了波形，还是找不出问题在哪儿，最终公司决定让我去原厂那边寻求帮助。我这人不老实，一听可以出差，这不意味着公费吃喝、脱离苦海了？出发前都有点小兴奋了。可我万万没想到，这是另一片苦海，而且更苦。临行前公司从硬件部门抽了个人和我一起去，蛮帅气的一个小伙，也蛮健谈的，路上有说有笑。但一到目的地，我就体会到了什么叫人不可貌相。对方工程师询问一些板子相关的问题，和我同去的硬件小哥居然懵了，一问三不知，各种可能、应该、也许都出来了。随后对方问我要一些ic相关的资料，如操作手册、datasheet等，这次轮到我懵了，我完全不知道需要这些资料。整个下午我们都处于懵圈状态，一直都是对方在操作，估计他们也感到无奈，临下班前还让我们回去叫些懂硬件的过来，我当时头就晕了，感觉这次公司脸面丢大了。
  那天回去之后我就开始着手准备资料，自己把板子原理图过了一下，虽然看不懂，但至少有个印象。准备妥当后，第二天我又厚着脸皮去了，不过这次和我同行的硬件小哥换了个人，事后证明这是一个非常明智的替换，这位硬件小哥很好地回答了对方的若干提问。而我这次也是有备而来，总算不那么狼狈了。满以为这次能找出问题的根源，但我们几个人折腾了一个下午，还是没找到一点线索，就在我们感到无能为力的时候，ic厂商那边发来email告之，是他们的ic本身质量有问题，我们所有人都白折腾了。还好我也不算太白，至少从原厂的老司机那学会了同时分析SCL和Data的波形，从而知道发送的数据是什么，还能检查i2c地址是否冲突。
  这个问题折磨了我整整一周，虽然最后不是由我解决的，却让我学到了很多，也让我深刻地体会到一位合格的嵌入式工程师需要多少知识储备。无论是硬件还是系统，我都太欠缺了，这种缺失导致的无力感让我至今难忘。人们总说磨难使人成长，但使人成长的不是磨难本身，而是磨难过后的思考。每次疼痛过后，都应该好好反思，为何会遭此劫难。这次经历让我认识到，是时候补补硬件和系统方面的知识了，否则迟早得再遭一劫。



